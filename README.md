# Dash Secure Message library

Cryptographic helper functions for use in Dash Platform dapp samples.

> Note: this is an experimental library to support dapp sample investigation of Dash Platform usage - not for production use.

## Prerequisites

In Node.js:

    const DashSecureMessage = require('dash-secure-message');

In the browser:

    <script src="dash-secure-message-lib.js" type="text/javascript"></script>

**Please see the examples below for sample usage**

## Browser usage

Include the `dash-secure-message-lib.js` script file available from the [releases page](https://github.com/dashmachine/dash-secure-message/releases).

## Nodejs usage

    npm i dash-secure-message

### Documentation

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

##### Table of Contents

-   [DashSecureMessage](#dashsecuremessage)
    -   [Examples](#examples)
-   [encrypt](#encrypt)
    -   [Parameters](#parameters)
-   [decrypt](#decrypt)
    -   [Parameters](#parameters-1)
-   [hash](#hash)
    -   [Parameters](#parameters-2)
-   [verify](#verify)
    -   [Parameters](#parameters-3)
-   [generateEntropy](#generateentropy)

#### DashSecureMessage

DashSecureMessage performs ECIES encryption & decryption and Double SHA256 Hashing. Note the class contains only static methods so you do not have to call the contructor, i.e. use DashSecureMessage.encrypt, not new DashSecureMessage()

##### Examples

```javascript
<!-- Usage in HTML file -->

<script src="dash-secure-message-lib.js" type="text/javascript"></script>
<script>
const senderPrivateKey = 'e930702ff1dbe78e1d827831e6e29a71264030fbbf5b08154b6cc954aebc011a'
const message = 'hello';
const recipientPublicKey = 'Av1kEA/QGhPA9bP2BlbYrf8RhTqAeU2SdL7OHOXJg/Ve'
const recipientPrivateKey = 'b28aa82d1af0f4548b606897ef376b2035187a70528b203f0604f74f43bc3418'
const senderPublicKey = 'A+KHq0TSgvILh/Bg6eHn7K/y7tvu/uxXjJIRSsqgZlZC'
console.log(`Encrypting message "${message}"...`);
const encrypted = DashSecureMessage.encrypt(senderPrivateKey, message, recipientPublicKey);
console.dir(encrypted);
console.log(`Decrypting result message "${message}"...`);
const decrypted = DashSecureMessage.decrypt(recipientPrivateKey, encrypted, senderPublicKey);
console.dir(decrypted);
console.log(`Hashing message "${message}"...`);
const digest = DashSecureMessage.hash(message);
console.dir(digest);
console.log(`Verifying hash...`);
const verifies = DashSecureMessage.verify(message, digest);
console.dir(verifies)
const entropy = DashSecureMessage.generateEntropy();
console.log(`entropy: ${entropy}`);

</script>
```

```javascript
//use in nodejs
const DashSecureMessage = require("dash-secure-message")

const senderPrivateKey = 'e930702ff1dbe78e1d827831e6e29a71264030fbbf5b08154b6cc954aebc011a'
const message = 'hello';
const recipientPublicKey = 'Av1kEA/QGhPA9bP2BlbYrf8RhTqAeU2SdL7OHOXJg/Ve'
const recipientPrivateKey = 'b28aa82d1af0f4548b606897ef376b2035187a70528b203f0604f74f43bc3418'
const senderPublicKey = 'A+KHq0TSgvILh/Bg6eHn7K/y7tvu/uxXjJIRSsqgZlZC'
console.log(`Encrypting message "${message}"...`);
const encrypted = DashSecureMessage.encrypt(senderPrivateKey, message, recipientPublicKey);
console.dir(encrypted);
console.log(`Decrypting result message "${message}"...`);
const decrypted = DashSecureMessage.decrypt(recipientPrivateKey, encrypted, senderPublicKey);
console.dir(decrypted);
console.log(`Hashing message "${message}"...`);
const digest = DashSecureMessage.hash(message);
console.dir(digest);
console.log(`Verifying hash...`);
const verifies = DashSecureMessage.verify(message, digest);
console.dir(verifies)
const entropy = DashSecureMessage.generateEntropy();
console.log(`entropy: ${entropy}`);
```

#### encrypt

##### Parameters

-   `senderPrivateKey` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The private key of the Dash User sending the message
-   `message` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** message to encrypt
-   `recipientPublicKey` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The public key for the Identity of the Dash User receiveing the message

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The encrypted message

#### decrypt

##### Parameters

-   `recipientPrivateKey` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The private key of the Dash User receiving the message
-   `encryptedMessage` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The encrypted message to decrypt
-   `senderPublicKey` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The public key for the Identity of the Dash User sending the message

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The decrypted message

#### hash

##### Parameters

-   `message` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** full message to be hashed

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The hex digestof the  message

#### verify

##### Parameters

-   `message` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** full message to be hashed
-   `digest` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** digest to compare

#### generateEntropy

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** A dash address fro use as entropy

### License

[MIT License](LICENSE)

# Development

To develop this library:

-   clone the repository and change to project directory 


    git clone  https://github.com/dashmachine/dash-secure-message.git && cd dash-secure-message

The source file is `src/dash-secure-message.js`

-   build output


    npm run build

-   test with webpack dev server


    npm start

-   update documentation (requires npm documentation package installed globally:  `npm i -g documentation`)

Update the Documentation section of the README.md file  

    npm run docs:readme
